var b=(i,g,_)=>new Promise((c,p)=>{var d=t=>{try{l(_.next(t))}catch(r){p(r)}},m=t=>{try{l(_.throw(t))}catch(r){p(r)}},l=t=>t.done?c(t.value):Promise.resolve(t.value).then(d,m);l((_=_.apply(i,g)).next())});import{_ as V,u as I,w as $}from"./index.44756176.js";import{f as J}from"./dateUtil.e0ac7f3e.js";import{T as v,B as O}from"./TableAction.c67eb4c7.js";import{v as R}from"./function.d366e6a2.js";import{d as X,a3 as q,f as L,k as y,h as C,o as M,_ as W,X as n,V as o,a,u,bU as j,p as G,b as H,bh as f,aJ as K,a2 as P,N as Q,bV as Y,bW as Z,bX as ee,b4 as oe,ah as ne,ay as te,ax as se}from"./vendor.b23ac7e6.js";import"./useDesignSetting.19ec6624.js";import"./index.esm.f571281f.js";const k=i=>(G("data-v-46a744dc"),i=i(),H(),i),ue={class:"published_online"},ae={class:"from_item"},ie=k(()=>a("div",{class:"label"},"\u7248\u672C\u53F7:",-1)),_e={class:"from_item"},le=k(()=>a("div",{class:"label"},"\u524D\u7AEF\u9875\u9762:",-1)),re={style:{"margin-bottom":"12px"}},ce=f(" \u70B9\u51FB\u6216\u8005\u62D6\u52A8\u6587\u4EF6\u5230\u8BE5\u533A\u57DF\u6765\u4E0A\u4F20 "),pe=f(" \u652F\u6301zip\u683C\u5F0F "),de={class:"from_item"},fe=f("\u6267\u884C\u53D1\u5E03"),me=f("> "),he=X({setup(i){const _=I().getToken,c=q(),p=L(!1),d=y({version:"",file:""}),m=[{title:"\u7248\u672Cid",key:"id"},{title:"\u7248\u672C\u53F7",key:"versionsName"},{title:"\u53D1\u5E03\u72B6\u6001",key:"publishStatus",render(e){return[C(K,{size:"small",type:e.publishStatus===1?"primary":"error"},e.publishStatus===1?"\u6210\u529F":"\u5931\u8D25")]}},{title:"\u53D1\u5E03\u65F6\u95F4",key:"createTime",render(e){return J(e.updateTime)}}],l=y({width:250,title:"\u64CD\u4F5C",key:"action",fixed:"right",render(e){return C(v,{style:"button",actions:[{label:"\u4E0B\u8F7D",onClick:E.bind(null,e),type:"primary",ifShow:()=>!0,auth:["edit_auth"]}]})}}),t=e=>b(this,null,function*(){var s;return((s=e.file.file)==null?void 0:s.type)!=="application/zip"?(c.error("\u53EA\u80FD\u4E0A\u4F20zip\u538B\u7F29\u5305"),!1):!0}),r=e=>b(this,null,function*(){return console.log("%c \u{1F32E} res: ","font-size:20px;background-color: #ED9EC7;color:#fff;",e),yield R({})});function E(e){console.log("%c \u{1F32E} record: ","font-size:20px;background-color: #ED9EC7;color:#fff;",e)}function x(e){e.file.status==="finished"&&c.success("\u4E0A\u4F20\u6210\u529F"),console.log("%c \u{1F37F} e: ","font-size:20px;background-color: #465975;color:#fff;",e)}function B(e){let s=JSON.parse(e.event.currentTarget.response).data;console.log("%c \u{1F356} res: ","font-size:20px;background-color: #4b4b4b;color:#fff;",s)}return(e,s)=>{const D=P,z=Q,S=Y,w=Z,A=ee,T=oe,N=ne,F=te,U=se;return M(),W(U,{animated:!0},{default:n(()=>[o(F,{name:"oasis",tab:"\u5728\u7EBF\u53D1\u5E03"},{default:n(()=>[a("div",ue,[a("div",ae,[ie,o(D,{value:u(d).version,"onUpdate:value":s[0]||(s[0]=h=>u(d).version=h),placeholder:"\u8BF7\u8F93\u5165\u7248\u672C\u53F7"},null,8,["value"])]),a("div",_e,[le,o(T,{name:"file",action:u($).baseUrl+"file/file/upload",onBeforeUpload:t,onChange:x,max:1,onFinish:B,headers:{Authorization:u(_)}},{default:n(()=>[o(A,{style:{width:"500px"}},{default:n(()=>[a("div",re,[o(z,{size:"48",depth:3},{default:n(()=>[o(u(j))]),_:1})]),o(S,{style:{"font-size":"16px"}},{default:n(()=>[ce]),_:1}),o(w,{depth:"3",style:{margin:"8px 0 0 0"}},{default:n(()=>[pe]),_:1})]),_:1})]),_:1},8,["action","headers"])]),a("div",de,[o(N,{type:"primary",class:"min-btn",loading:p.value,onClick:e.confirmForm},{default:n(()=>[fe]),_:1},8,["loading","onClick"])])])]),_:1}),o(F,{name:"versions",tab:"\u7248\u672C\u8BB0\u5F55"},{default:n(()=>[o(u(O),{columns:m,request:r,"row-key":h=>h.id,ref:"actionRef",actionColumn:u(l)},{action:n(()=>[o(u(v))]),_:1},8,["row-key","actionColumn"])]),_:1}),me]),_:1})}}});var xe=V(he,[["__scopeId","data-v-46a744dc"]]);export{xe as default};
