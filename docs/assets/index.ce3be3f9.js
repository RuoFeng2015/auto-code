var U=Object.defineProperty;var y=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var k=(o,t,u)=>t in o?U(o,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[t]=u,h=(o,t)=>{for(var u in t||(t={}))M.call(t,u)&&k(o,u,t[u]);if(y)for(var u of y(t))q.call(t,u)&&k(o,u,t[u]);return o};var E=(o,t,u)=>new Promise((r,d)=>{var m=a=>{try{c(u.next(a))}catch(n){d(n)}},f=a=>{try{c(u.throw(a))}catch(n){d(n)}},c=a=>a.done?r(a.value):Promise.resolve(a.value).then(m,f);c((u=u.apply(o,t)).next())});import{B as z,T as g}from"./TableAction.d65c08e5.js";import{u as J,B as L}from"./useForm.a78b5dee.js";import{d as O,Q,a3 as W,a4 as X,f as Z,k as $,o as C,c as j,V as s,X as l,u as i,_ as G,bN as H,Z as K,bh as Y,h as D,aJ as ee,a2 as ue,N as te,ah as oe,az as ne}from"./vendor.b23ac7e6.js";import{f as ae,d as se}from"./form_list.545ce60e.js";import{d as le,R as ie}from"./index.47bca9f6.js";import"./useDesignSetting.222c9fbf.js";import"./index.esm.f571281f.js";const re=Y(" \u65B0\u5EFA\u8868\u5355 "),Be=O({setup(o){const{hasPermission:t}=le(),u=Q(),r=W(),d=X(),m=Z(),f=[{field:"name",component:"NInput",label:"\u8868\u540D",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",onInput:e=>{console.log(e),n.sheetName=e}}},{field:"type",component:"NSelect",label:"\u7C7B\u578B",componentProps:{placeholder:"\u6240\u6709",options:[{label:"\u7CFB\u7EDF\u8868\u5355",value:0},{label:"\u4E1A\u52A1\u8868\u5355",value:1}],onUpdateValue:e=>{console.log(e),n.sheetType=""+e}}}],[c,{}]=J({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:f});let n=$((()=>({sheetName:"",sheetType:""}))());const T=[{title:"\u8868\u5355id",key:"id"},{title:"\u8868\u5355\u7F16\u7801",key:"sheetCode"},{title:"\u8868\u5355\u540D\u79F0",key:"sheetName"},{title:"\u8868\u5355\u7C7B\u578B",key:"sheetType",render(e){return D(ee,{type:e.isDefault?"success":"error"},{default:()=>e.isDefault?"\u662F":"\u5426"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u66F4\u65B0\u65F6\u95F4",key:"updateTime"},{title:"\u64CD\u4F5C",key:"create_date",render(e){return D(g,{style:"button",actions:[{label:"\u7F16\u8F91",onClick:v.bind(null,e),ifShow:()=>!0,auth:["edit_form"]},{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:N.bind(null,e),ifShow:()=>!0,auth:["delete_form"]}],dropDownActions:[{label:"\u542F\u7528",key:"enabled",ifShow:()=>!0},{label:"\u7981\u7528",key:"disabled",ifShow:()=>!0}],select:p=>{r.info(`\u60A8\u70B9\u51FB\u4E86\uFF0C${p} \u6309\u94AE`)}})}}],A=e=>E(this,null,function*(){return yield ae(h(h({},n),e))});function B(){m.value.reload()}function v(e){console.log("\u70B9\u51FB\u4E86\u7F16\u8F91",e),u.push({name:"form_detail",params:{id:e.id}})}function N(e){d.warning({title:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u8868\u5355\uFF1F",content:"\u63D0\u793A\uFF1A\u5220\u9664\u540E\u6D3B\u52A8\u7BA1\u7406--\u8868\u5355\u8BBE\u7F6E\u4E2D\u6240\u5173\u8054\u7684\u8868\u5355\u4E5F\u4E00\u5E76\u5220\u9664,\u65E0\u6CD5\u6062\u590D\u3002",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{const{code:p,resultMsg:F}=se({id:e.id});p===ie.SUCCESS?r.success("\u5220\u9664\u6210\u529F"):r.error("\u5220\u9664\u5931\u8D25:"+F),B()}})}function R(e){console.log(e),B()}function S(e){n.sheetName="",n.sheetType="",console.log(e)}const w=()=>{u.push({name:"form_detail",params:{id:0}})};return(e,p)=>{const F=ue,x=te,P=oe,V=ne;return C(),j("div",null,[s(V,{bordered:!1,class:"mt-4 proCard"},{default:l(()=>[s(i(L),{onRegister:i(c),onSubmit:R,onReset:S},{statusSlot:l(({model:_,field:b})=>[s(F,{value:_[b],"onUpdate:value":I=>_[b]=I},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),s(i(z),{columns:T,request:A,"row-key":_=>_.id,ref_key:"actionRef",ref:m},{tableTitle:l(()=>[i(t)(["add_form"])?(C(),G(P,{key:0,type:"primary",onClick:w,hasPermission:""},{icon:l(()=>[s(x,null,{default:l(()=>[s(i(H))]),_:1})]),default:l(()=>[re]),_:1})):K("",!0)]),action:l(()=>[s(i(g))]),_:1},8,["row-key"])]),_:1})])}}});export{Be as default};
