var K=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var k=(c,o,s)=>o in c?K(c,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[o]=s,N=(c,o)=>{for(var s in o||(o={}))ue.call(o,s)&&k(c,s,o[s]);if(y)for(var s of y(o))te.call(o,s)&&k(c,s,o[s]);return c},w=(c,o)=>Z(c,ee(o));var E=(c,o,s)=>new Promise((b,p)=>{var v=i=>{try{g(s.next(i))}catch(u){p(u)}},d=i=>{try{g(s.throw(i))}catch(u){p(u)}},g=i=>i.done?b(i.value):Promise.resolve(i.value).then(v,d);g((s=s.apply(c,o)).next())});import{B as ae,T as oe}from"./TableAction.f4a71aa5.js";import{m as h,a as le,u as ne}from"./organization_list.87e216b8.js";import{t as se}from"./platform_list.a62be74c.js";import{u as re,B as ie}from"./useForm.47f43cbf.js";import{R as I}from"./index.90881ba4.js";import{d as ce,a3 as de,a4 as pe,Q as me,f as _,k as S,g as fe,o as _e,c as ge,V as t,X as r,a as Fe,u as a,ah as A,N as be,bN as ve,bY as Ce,bh as B,h as Ee,a2 as he,aj as Ae,aU as Be,ai as De,av as ye,b3 as ke,az as Ne}from"./vendor.b23ac7e6.js";import"./useDesignSetting.37c45417.js";import"./index.esm.f571281f.js";const we={class:"activity_manage flex justify-between"},Ie=B(" \u6DFB\u52A0\u6570\u636E "),Se=B(" \u53D6\u6D88 "),xe=B("\u63D0\u4EA4"),Me=ce({setup(c){const o=de();pe(),me();const s=_(null),b=_(),p=_(!1);let v=S({options:[]}),d=_(!1);_("VPCP");const g=()=>({orgName:"",orgContact:"",parentId:"",deptDesc:""});let i=0,u=S(g());const F=_("\u65B0\u589E\u673A\u6784"),x={orgName:{required:!0,message:"\u8BF7\u8F93\u5165\u673A\u6784\u540D\u79F0",trigger:"blur"},orgContact:{required:!0,message:"\u8BF7\u8F93\u5165\u673A\u6784\u8054\u7CFB\u4EBA",trigger:"blur"},deptDesc:{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0",trigger:"blur"}},R=[{field:"name",component:"NInput",label:"\u673A\u6784\u540D\u79F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u673A\u6784\u540D\u79F0",onInput:e=>{console.log(e)}}},{field:"tenantName",component:"NInput",label:"\u6240\u5C5E\u5E73\u53F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6240\u5C5E\u5E73\u53F0",onInput:e=>{console.log(e)}}},{field:"makeDate",component:"NDatePicker",label:"\u521B\u5EFA\u65F6\u95F4",componentProps:{type:"date",clearable:!0,onUpdateValue:e=>{console.log(e)}}}],[U,{}]=re({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:100,schemas:R}),T=[{title:"\u673A\u6784\u540D\u79F0",key:"orgName"},{title:"\u6240\u5C5E\u5E73\u53F0",key:"tenantName"},{title:"\u8054\u7CFB\u4EBA",key:"orgContact"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u64CD\u4F5C",key:"create_date",render(e){return Ee(oe,{style:"button",actions:[{label:"\u6DFB\u52A0\u5B50\u673A\u6784",onClick:q.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u7F16\u8F91",onClick:M.bind(null,e),ifShow:()=>!0,auth:["basic_list"]}]})}}];function C(){b.value.reload()}function P(e){console.log(e),h(e),C()}function V(e){e.preventDefault(),p.value=!0,s.value.validate(l=>{l?o.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F"):i>0?j():z()})}function z(){le(u).then(e=>{console.log("%c \u{1F37E} res: ","font-size:20px;background-color: #7F2B82;color:#fff;",e),e.code===I.SUCCESS?(d.value=!1,o.success("\u65B0\u5EFA\u6210\u529F"),C()):o.error(e.message),p.value=!1,console.log("%c \u{1F964} res: ","font-size:20px;background-color: #465975;color:#fff;",e)})}const O=()=>{F.value="\u65B0\u589E\u673A\u6784",d.value=!0,u.orgName="",u.orgContact="",u.parentId="",u.deptDesc="",i=0},q=()=>{F.value="\u65B0\u589E\u5B50\u673A\u6784",d.value=!0,u.orgName="",u.orgContact="",u.parentId="",u.deptDesc="",i=0};function j(){ne(w(N({},u),{id:i})).then(e=>{e.code===I.SUCCESS?(d.value=!1,o.success("\u4FEE\u6539\u6210\u529F"),C()):o.error(e.message),p.value=!1})}function M(e){F.value="\u7F16\u8F91\u673A\u6784",d.value=!0,i=e.id,u.orgName=e.orgName,u.orgContact=e.orgContact,u.parentId=e.parentId,u.deptDesc=e.deptDesc}function L(e){d.value=!1}function Q(e){console.log(e),C()}const W=e=>E(this,null,function*(){return console.log(h()),console.log("%c \u{1F32E} res: ","font-size:20px;background-color: #ED9EC7;color:#fff;",e),yield h(e)});return fe(()=>E(this,null,function*(){const e=yield se();console.log(e),e.data.forEach(l=>{v.options.push({label:l.tenantName,value:l.id})})})),(e,l)=>{const m=he,f=Ae,X=Be,Y=De,$=ye,G=ke,H=Ne;return _e(),ge("div",we,[t(H,null,{default:r(()=>[Fe("div",null,[t(a(ie),{onRegister:a(U),onSubmit:P,onReset:Q},{statusSlot:r(({model:n,field:D})=>[t(m,{value:n[D],"onUpdate:value":J=>n[D]=J},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),t(a(ae),{columns:T,request:W,"row-key":n=>n.id,ref_key:"actionRef",ref:b,"scroll-x":1090},{tableTitle:r(()=>[t(a(A),{type:"primary",onClick:O},{icon:r(()=>[t(a(be),null,{default:r(()=>[t(a(ve))]),_:1})]),default:r(()=>[Ie]),_:1})]),_:1},8,["row-key"]),t(G,{show:a(d),"onUpdate:show":l[6]||(l[6]=n=>Ce(d)?d.value=n:d=n),"show-icon":!1,title:F.value,preset:"card",style:{width:"800px"}},{footer:r(()=>[t($,{justify:"end"},{default:r(()=>[t(a(A),{class:"min-btn",type:"info",ghost:"","icon-placement":"left",onClick:L},{default:r(()=>[Se]),_:1}),t(a(A),{type:"primary",class:"min-btn",loading:p.value,onClick:V},{default:r(()=>[xe]),_:1},8,["loading"])]),_:1})]),default:r(()=>[t(Y,{"label-width":80,model:a(u),rules:x,"label-placement":"left",ref_key:"formRef",ref:s},{default:r(()=>[t(f,{label:"\u673A\u6784\u540D\u79F0",path:"orgName","label-width":"auto"},{default:r(()=>[t(m,{value:a(u).orgName,"onUpdate:value":l[0]||(l[0]=n=>a(u).orgName=n),placeholder:"\u8F93\u5165\u673A\u6784\u540D\u79F0"},null,8,["value"])]),_:1}),t(f,{label:"\u673A\u6784\u7F16\u7801",path:"orgContact","label-width":"auto"},{default:r(()=>[t(m,{value:a(u).orgContact,"onUpdate:value":l[1]||(l[1]=n=>a(u).orgContact=n),placeholder:"\u8F93\u5165\u673A\u6784\u7F16\u7801",disabled:F.value=="\u7F16\u8F91\u673A\u6784"},null,8,["value","disabled"])]),_:1}),t(f,{label:"\u63CF\u8FF0",path:"deptDesc","label-width":"auto"},{default:r(()=>[t(m,{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",type:"textarea",value:a(u).deptDesc,"onUpdate:value":l[2]||(l[2]=n=>a(u).deptDesc=n)},null,8,["value"])]),_:1}),t(f,{label:"\u673A\u6784\u8054\u7CFB\u4EBA",path:"orgContact","label-width":"auto"},{default:r(()=>[t(m,{value:a(u).orgContact,"onUpdate:value":l[3]||(l[3]=n=>a(u).orgContact=n),placeholder:"\u8F93\u5165\u673A\u6784\u8054\u7CFB\u4EBA"},null,8,["value"])]),_:1}),t(f,{label:"\u6240\u5C5E\u5E73\u53F0",path:"deptId","label-width":"auto"},{default:r(()=>[t(X,{placeholder:"\u6240\u5C5E\u5E73\u53F0",options:a(v).options,value:a(u).deptId,"onUpdate:value":l[4]||(l[4]=n=>a(u).deptId=n)},null,8,["options","value"])]),_:1}),t(f,{label:"\u4E0A\u7EA7\u673A\u6784",path:"parentId","label-width":"auto"},{default:r(()=>[t(m,{value:a(u).parentId,"onUpdate:value":l[5]||(l[5]=n=>a(u).parentId=n),placeholder:"\u4E0A\u7EA7\u673A\u6784"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])]),_:1})])}}});export{Me as default};
