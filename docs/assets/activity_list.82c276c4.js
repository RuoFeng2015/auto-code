var K=Object.defineProperty;var C=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var E=(u,a,e)=>a in u?K(u,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[a]=e,k=(u,a)=>{for(var e in a||(a={}))L.call(a,e)&&E(u,e,a[e]);if(C)for(var e of C(a))M.call(a,e)&&E(u,e,a[e]);return u};var v=(u,a,e)=>new Promise((m,d)=>{var b=n=>{try{p(e.next(n))}catch(_){d(_)}},h=n=>{try{p(e.throw(n))}catch(_){d(_)}},p=n=>n.done?m(n.value):Promise.resolve(n.value).then(b,h);p((e=e.apply(u,a)).next())});import{B as j,T as q}from"./TableAction.d65c08e5.js";import{u as G,B as O}from"./useForm.a78b5dee.js";import{d as Q,Q as W,a3 as X,f as Z,k as w,h as o,b_ as r,N as s,b$ as $,o as A,c as H,V as i,X as c,u as l,a as J,_ as Y,bN as ee,Z as te,bh as ae,b5 as ne,az as ue,a2 as oe,ah as le}from"./vendor.b23ac7e6.js";import{b as se,d as ie}from"./activity_list.7a1e7beb.js";import{d as ce,R as re}from"./index.47bca9f6.js";import"./useDesignSetting.222c9fbf.js";import"./index.esm.f571281f.js";const de={class:"flex justify-between activity_manage"},pe=ae(" \u65B0\u5EFA\u6D3B\u52A8 "),ve=Q({setup(u){const{hasPermission:a}=ce(),e=W(),m=X(),d=Z(),b=[{field:"name",component:"NInput",label:"\u6D3B\u52A8\u540D\u79F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0",onInput:t=>{console.log(t),y.activityName=t}}}],[h,{}]=G({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:b}),p=[{title:"\u6D3B\u52A8\u540D\u79F0",key:"activityName"},{title:"\u6D3B\u52A8\u6807\u8BC6",key:"activityCode",width:100},{title:"\u6D3B\u52A8\u94FE\u63A5",key:"activityUrl"},{title:"\u5F00\u59CB\u65F6\u95F4",key:"activityStartTime"},{title:"\u7ED3\u675F\u65F6\u95F4",key:"activityEndTime"},{title:"\u64CD\u4F5C",key:"create_date",render(t){return o(q,{style:"button",actions:[{size:"small",type:"primary",label:"\u7F16\u8F91",ifShow:()=>!0,auth:["edit_activity"],onClick:S.bind(null,t)},{size:"small",type:"error",label:"\u5220\u9664",icon:"ic:outline-delete-outline",ifShow:()=>!0,auth:["delete_activity"],onClick:R.bind(null,t)}]})}}],n=w({treeData:[{label:"\u7701\u516C\u53F8",key:1,children:[{label:"\u5E7F\u5DDE",key:2,prefix:()=>o(s,{component:r})},{label:"\u4E2D\u5C71",key:3,prefix:()=>o(s,{component:r})},{label:"\u4F5B\u5C71",key:4,prefix:()=>o(s,{component:r})},{label:"\u6E05\u8FDC",key:5,prefix:()=>o(s,{component:r})},{label:"\u4E91\u6D6E",key:7,prefix:()=>o(s,{component:r})},{label:"\u6DF1\u5733",key:8,prefix:()=>o(s,{component:r})}]}],defaultExpandedKeys:["40","41"],renderSwitcherIcon:()=>o(s,null,{default:()=>o($)})});let y=w((()=>({activityName:"",state:0}))());const N=t=>v(this,null,function*(){return yield se(k(k({},y),t))});function B(){d.value.reload()}function S(t){console.log("\u70B9\u51FB\u4E86\u7F16\u8F91",t),e.push({name:"activity_profile",params:{id:t.id}})}function R(t){return v(this,null,function*(){console.log("\u70B9\u51FB\u4E86\u5220\u9664",t);const{code:x,resultMsg:F}=yield ie({id:t.id});x===re.SUCCESS?m.success("\u5220\u9664\u6210\u529F"):m.error("\u5220\u9664\u5931\u8D25:"+F),B()})}function T(t){console.log(t),B()}function P(t){y.activityName="",y.status=0,console.log(t)}const V=()=>{e.push({name:"activity_profile",params:{id:0}})};return(t,x)=>{const F=ne,D=ue,I=oe,z=le;return A(),H("div",de,[i(D,{class:"mr-4",style:{width:"240px"},title:"\u7EC4\u7EC7\u673A\u6784","header-style":{borderBottom:"1px solid #ddd",fontSize:"16px",padding:"8px 12px"}},{default:c(()=>[i(F,{"block-line":"","default-expand-all":"",data:l(n).treeData,"render-switcher-icon":l(n).renderSwitcherIcon,"default-expanded-keys":l(n).defaultExpandedKeys,selectable:""},null,8,["data","render-switcher-icon","default-expanded-keys"])]),_:1}),i(D,null,{default:c(()=>[J("div",null,[i(l(O),{onRegister:l(h),onSubmit:T,onReset:P},{statusSlot:c(({model:f,field:g})=>[i(I,{value:f[g],"onUpdate:value":U=>f[g]=U},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),i(l(j),{columns:p,request:N,"row-key":f=>f.id,ref_key:"actionRef",ref:d,"scroll-x":1090},{tableTitle:c(()=>[l(a)(["add_activity"])?(A(),Y(z,{key:0,type:"primary",onClick:V,hasPermission:""},{icon:c(()=>[i(l(s),null,{default:c(()=>[i(l(ee))]),_:1})]),default:c(()=>[pe]),_:1})):te("",!0)]),_:1},8,["row-key"])])]),_:1})])}}});export{ve as default};
