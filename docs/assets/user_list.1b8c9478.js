var Z=Object.defineProperty,ee=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var w=(o,n,s)=>n in o?Z(o,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[n]=s,U=(o,n)=>{for(var s in n||(n={}))te.call(n,s)&&w(o,s,n[s]);if(D)for(var s of D(n))le.call(n,s)&&w(o,s,n[s]);return o},A=(o,n)=>ee(o,ue(n));var S=(o,n,s)=>new Promise((h,c)=>{var E=u=>{try{d(s.next(u))}catch(m){c(m)}},_=u=>{try{d(s.throw(u))}catch(m){c(m)}},d=u=>u.done?h(u.value):Promise.resolve(u.value).then(E,_);d((s=s.apply(o,n)).next())});import{B as oe,T as ne}from"./TableAction.f4a71aa5.js";import{u as ae,B as se}from"./useForm.47f43cbf.js";import{h as g,R as I}from"./index.90881ba4.js";import{d as re,a3 as ie,a4 as pe,Q as de,f as F,k as R,o as ce,c as me,V as l,X as r,a as fe,u as t,ah as k,N as _e,bN as Fe,bY as he,bh as y,h as x,aF as be,a2 as ve,aj as ge,aU as Ee,ai as Be,av as ke,b3 as ye,az as Ce}from"./vendor.b23ac7e6.js";import"./useDesignSetting.37c45417.js";import"./index.esm.f571281f.js";function P(o){return g.request({url:"system/user/page",method:"POST",params:o})}function De(o){return g.request({url:`system/user/delete/${o}`,method:"get"})}function we(o){return g.request({url:"system/user/page",method:"POST",params:o})}function Ue(o){return g.request({url:"system/user/create",method:"POST",params:o})}const Ae={class:"activity_manage flex justify-between"},Se=y(" \u6DFB\u52A0\u6570\u636E "),Ie=y(" \u53D6\u6D88 "),Re=y("\u63D0\u4EA4"),Oe=re({setup(o){const n=ie();pe(),de();const s=F(null),h=F(),c=F(!1),E=()=>({name:"",phone:"",roleId:"",tenantCode:"",deptId:"",remark:""}),_=R({options:[{label:"\u5236\u9020\u4E1A",value:"0"},{label:"\u519C\u4E1A",value:"1"}]});let d=0,u=R(E());const m=F("\u65B0\u589E\u7528\u6237");let p=F(!1);const T={name:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u89D2\u8272",trigger:"blur"},phone:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u624B\u673A",trigger:"blur"}},N=[{field:"name",component:"NInput",label:"\u7528\u6237\u59D3\u540D",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u59D3\u540D",onInput:e=>{console.log(e)}}},{field:"type",component:"NSelect",label:"\u7528\u6237\u89D2\u8272",componentProps:{placeholder:"\u8BF7\u9009\u62E9\u7528\u6237\u89D2\u8272",options:[{label:"\u89D2\u82721",value:1},{label:"\u89D2\u82722",value:2}],onUpdateValue:e=>{console.log(e)}}},{field:"phone",component:"NInput",label:"\u624B\u673A\u53F7\u7801",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",onInput:e=>{console.log(e)}}},{field:"type",component:"NSelect",label:"\u4F7F\u7528\u72B6\u6001",componentProps:{placeholder:"\u4F7F\u7528\u72B6\u6001",options:[{label:"\u89D2\u82721",value:1},{label:"\u89D2\u82722",value:2}],onUpdateValue:e=>{console.log(e)}}},{field:"makeDate",component:"NDatePicker",label:"\u521B\u5EFA\u65F6\u95F4",componentProps:{type:"date",clearable:!0,onUpdateValue:e=>{console.log(e)}}}],[V,{}]=ae({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:100,schemas:N}),q=[{title:"\u624B\u673A\u53F7\u7801",key:"phone"},{title:"\u7528\u6237\u59D3\u540D",key:"name"},{title:"\u89D2\u8272",key:"roleId"},{title:"\u4F7F\u7528\u72B6\u6001",key:"status",render(e){return x(be,{value:e.isDefault})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u521B\u5EFA\u4EBA",key:"creator"},{title:"\u64CD\u4F5C",key:"create_date",render(e){return x(ne,{style:"button",actions:[{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:z.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u7F16\u8F91",onClick:L.bind(null,e),ifShow:()=>!0,auth:["basic_list"]}]})}}];function b(){h.value.reload()}function z(e){console.log(e.id),De(e.id),b()}function O(e){e.preventDefault(),c.value=!0,s.value.validate(i=>{i?n.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F"):d>0?$():j()})}function j(){Ue(u).then(e=>{console.log("%c \u{1F37E} res: ","font-size:20px;background-color: #7F2B82;color:#fff;",e),e.code===I.SUCCESS?(p.value=!1,n.success("\u65B0\u5EFA\u6210\u529F"),b()):n.error(e.message),c.value=!1,console.log("%c \u{1F964} res: ","font-size:20px;background-color: #465975;color:#fff;",e)})}const M=()=>{m.value="\u65B0\u5EFA\u7528\u6237",p.value=!0,u.name="",u.phone="",u.roleId="",u.tenantCode="",u.remark="",d=0};function $(){we(A(U({},u),{id:d})).then(e=>{e.code===I.SUCCESS?(p.value=!1,n.success("\u4FEE\u6539\u6210\u529F"),b()):n.error(e.message),c.value=!1})}function L(e){m.value="\u4FEE\u6539\u7528\u6237",p.value=!0,d=e.id,u.name=e.name,u.phone=e.phone,u.roleId=e.roleId,u.tenantCode=e.tenantCode,u.remark=e.remark}function Q(e){p.value=!1}function W(e){console.log(e),P(e),b()}const X=e=>S(this,null,function*(){return console.log("%c \u{1F32E} res: ","font-size:20px;background-color: #ED9EC7;color:#fff;",e),yield P(e)});return(e,i)=>{const v=ve,f=ge,B=Ee,Y=Be,G=ke,H=ye,J=Ce;return ce(),me("div",Ae,[l(J,null,{default:r(()=>[fe("div",null,[l(t(se),{onRegister:t(V),onSubmit:W,onReset:e.handleReset},{statusSlot:r(({model:a,field:C})=>[l(v,{value:a[C],"onUpdate:value":K=>a[C]=K},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister","onReset"]),l(t(oe),{columns:q,request:X,"row-key":a=>a.id,ref_key:"actionRef",ref:h,"scroll-x":1090},{tableTitle:r(()=>[l(t(k),{type:"primary",onClick:M},{icon:r(()=>[l(t(_e),null,{default:r(()=>[l(t(Fe))]),_:1})]),default:r(()=>[Se]),_:1})]),_:1},8,["row-key"]),l(H,{show:t(p),"onUpdate:show":i[6]||(i[6]=a=>he(p)?p.value=a:p=a),"show-icon":!1,title:m.value,preset:"card",style:{width:"800px"}},{footer:r(()=>[l(G,{justify:"end"},{default:r(()=>[l(t(k),{class:"min-btn",type:"info",ghost:"","icon-placement":"left",onClick:Q},{default:r(()=>[Ie]),_:1}),l(t(k),{type:"primary",class:"min-btn",loading:c.value,onClick:O},{default:r(()=>[Re]),_:1},8,["loading"])]),_:1})]),default:r(()=>[l(Y,{"label-width":80,model:t(u),rules:T,"label-placement":"left",ref_key:"formRef",ref:s},{default:r(()=>[l(f,{label:"\u7528\u6237\u540D\u79F0",path:"name","label-width":"auto"},{default:r(()=>[l(v,{value:t(u).name,"onUpdate:value":i[0]||(i[0]=a=>t(u).name=a),placeholder:"\u8F93\u5165\u7528\u6237\u540D\u79F0"},null,8,["value"])]),_:1}),l(f,{label:"\u7528\u6237\u624B\u673A",path:"phone","label-width":"auto"},{default:r(()=>[l(v,{value:t(u).phone,"onUpdate:value":i[1]||(i[1]=a=>t(u).phone=a),placeholder:"\u8F93\u5165\u7528\u6237\u624B\u673A"},null,8,["value"])]),_:1}),l(f,{label:"\u9009\u62E9\u7528\u6237\u89D2\u8272",path:"roleId","label-width":"auto"},{default:r(()=>[l(B,{placeholder:"\u8BF7\u9009\u62E9\u9009\u62E9\u7528\u6237\u89D2\u8272",options:t(_).options,value:t(u).roleId,"onUpdate:value":i[2]||(i[2]=a=>t(u).roleId=a)},null,8,["options","value"])]),_:1}),l(f,{label:"\u9009\u62E9\u6240\u5C5E\u5E73\u53F0",path:"tenantCode","label-width":"auto"},{default:r(()=>[l(B,{placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5E73\u53F0",options:t(_).options,value:t(u).tenantCode,"onUpdate:value":i[3]||(i[3]=a=>t(u).tenantCode=a)},null,8,["options","value"])]),_:1}),l(f,{label:"\u9009\u62E9\u6240\u5C5E\u90E8\u95E8",path:"deptId","label-width":"auto"},{default:r(()=>[l(B,{placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8",options:t(_).options,value:t(u).deptId,"onUpdate:value":i[4]||(i[4]=a=>t(u).deptId=a)},null,8,["options","value"])]),_:1}),l(f,{label:"\u5907\u6CE8",path:"remark","label-width":"auto"},{default:r(()=>[l(v,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea",value:t(u).remark,"onUpdate:value":i[5]||(i[5]=a=>t(u).remark=a)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])]),_:1})])}}});export{Oe as default};
