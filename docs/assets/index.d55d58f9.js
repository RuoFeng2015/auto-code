var ae=Object.defineProperty,se=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var w=(r,o,l)=>o in r?ae(r,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[o]=l,h=(r,o)=>{for(var l in o||(o={}))le.call(o,l)&&w(r,l,o[l]);if(E)for(var l of E(o))oe.call(o,l)&&w(r,l,o[l]);return r},A=(r,o)=>se(r,ne(o));var R=(r,o,l)=>new Promise((F,v)=>{var T=y=>{try{c(l.next(y))}catch(m){v(m)}},d=y=>{try{c(l.throw(y))}catch(m){v(m)}},c=y=>y.done?F(y.value):Promise.resolve(y.value).then(T,d);c((l=l.apply(r,o)).next())});import{B as ie,T as x}from"./TableAction.c67eb4c7.js";import{u as re,B as pe}from"./useForm.d92a28cc.js";import{d as ye,Q as de,a3 as ce,a4 as me,f as _,k as U,o as S,c as _e,V as a,X as s,u as n,_ as fe,bN as Be,Z as Fe,aF as P,bh as N,h as q,a2 as ve,N as Te,ah as he,az as Ce,aj as ge,ai as be,av as ke,b3 as De}from"./vendor.b23ac7e6.js";import{a as Re,b as Ne,c as Ve,u as Ee}from"./dictionaries.2609e140.js";import{d as we,R as Ae}from"./index.44756176.js";import"./useDesignSetting.19ec6624.js";import"./index.esm.f571281f.js";const xe=N(" \u65B0\u5EFA\u7C7B\u578B "),Ue=N(" \u53D6\u6D88 "),Se=N("\u63D0\u4EA4"),We=ye({setup(r){const{hasPermission:o}=we(),l=de(),F=ce(),v=me(),T=_(),d=_(!1),c=_(!1),y=_(),m=_("\u65B0\u5EFA\u5B57\u5178"),C=_(!0),I=[{field:"sysTypeName",component:"NInput",label:"\u5B57\u5178\u540D\u79F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u540D\u79F0",onInput:e=>{console.log(e),g.sysTypeName=e}}}],[L,{}]=re({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:I});let g=U((()=>({sysTypeName:""}))());const j=[{title:"\u5B57\u5178id",key:"id"},{title:"\u5B57\u5178\u7C7B\u578B\u540D\u79F0",key:"sysTypeName"},{title:"\u5B57\u5178\u7C7B\u578B",key:"sysType"},{title:"\u7C7B\u578B\u503C",key:"sysTypeValue"},{title:"\u5907\u6CE8",key:"sysRemark"},{title:"\u662F\u5426\u542F\u7528",key:"status",render(e){return q(P,{value:e.status,onUpdateValue:t=>{W(e,t)}})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u64CD\u4F5C",key:"create_date",render(e){return q(x,{style:"button",actions:[{label:"\u7F16\u8F91",onClick:X.bind(null,e),ifShow:()=>!0,auth:["edit"]},{label:"\u6570\u636E\u5217\u8868",onClick:Z.bind(null,e),ifShow:()=>!0,auth:["data_list"]},{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:G.bind(null,e),ifShow:()=>!0,auth:["delete"]}]})}}],M={sysTypeName:{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B\u540D\u79F0",trigger:"blur"},sysType:{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B",trigger:"blur"},sysTypeValue:{required:!0,message:"\u8BF7\u8F93\u5165\u7C7B\u578B\u503C",trigger:"blur"}};let u=U((()=>({id:"",sysTypeName:"",sysType:"",sysTypeValue:"",sysRemark:"",status:!0}))());const $=e=>R(this,null,function*(){let t=yield Re(h(h({},g),e));return t.data.forEach(p=>{p.status=p.status===1}),t});function b(){T.value.reload()}function z(e){b()}function O(e){g.sysTypeName="",b()}function Q(){m.value="\u65B0\u5EFA\u5B57\u5178\u7C7B\u578B",d.value=!0,C.value=!0}function W(e,t){console.log("\u542F\u7528\uFF1A"+t)}function X(e){m.value="\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",d.value=!0,u.id=e.id,u.sysTypeName=e.sysTypeName,u.sysType=""+e.sysType,u.sysTypeValue=e.sysTypeValue,u.sysRemark=e.sysRemark,u.status=e.status,C.value=!1}function Z(e){l.push({name:"system_dictionary_children",params:{sysType:e.sysType}})}function G(e){v.info({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u5B57\u5178\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{Ne({id:e.id}).then(t=>{k(t)})},onNegativeClick:()=>{}})}function H(){d.value=!1}function J(e){e.preventDefault(),c.value=!0,y.value.validate(t=>R(this,null,function*(){if(!t){let p=A(h({},u),{status:u.status?1:0});C.value?yield Ve(p).then(f=>{k(f)}):yield Ee(p).then(f=>{k(f)}),d.value=!1}c.value=!1}))}function k(e){u.id="",u.sysTypeName="",u.sysType="",u.sysTypeValue="",u.sysRemark="",u.status=!0,e.code===Ae.SUCCESS?(F.success("\u64CD\u4F5C\u6210\u529F"),b()):F.error("\u64CD\u4F5C\u5931\u8D25\uFF1A"+e.message)}return(e,t)=>{const p=ve,f=Te,D=he,K=Ce,B=ge,Y=be,ee=ke,ue=De;return S(),_e("div",null,[a(K,{bordered:!1,class:"mt-4 proCard"},{default:s(()=>[a(n(pe),{onRegister:n(L),onSubmit:z,onReset:O},{statusSlot:s(({model:i,field:V})=>[a(p,{value:i[V],"onUpdate:value":te=>i[V]=te},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),a(n(ie),{columns:j,request:$,"row-key":i=>i.id,ref_key:"actionRef",ref:T},{tableTitle:s(()=>[n(o)(["add"])?(S(),fe(D,{key:0,type:"primary",onClick:Q,hasPermission:""},{icon:s(()=>[a(f,null,{default:s(()=>[a(n(Be))]),_:1})]),default:s(()=>[xe]),_:1})):Fe("",!0)]),action:s(()=>[a(n(x))]),_:1},8,["row-key"])]),_:1}),a(ue,{show:d.value,"onUpdate:show":t[5]||(t[5]=i=>d.value=i),"show-icon":!1,title:m.value,preset:"card",style:{"{\n          margin":"10px 60px",width:"600px"}},{footer:s(()=>[a(ee,{justify:"end"},{default:s(()=>[a(D,{class:"min-btn",type:"info",ghost:"","icon-placement":"left",onClick:H},{default:s(()=>[Ue]),_:1}),a(D,{type:"primary",class:"min-btn",loading:c.value,onClick:J},{default:s(()=>[Se]),_:1},8,["loading"])]),_:1})]),default:s(()=>[a(Y,{"label-width":80,model:n(u),rules:M,"label-placement":"left",ref_key:"formRef",ref:y},{default:s(()=>[a(B,{label:"\u5B57\u5178\u540D\u79F0",path:"sysTypeName"},{default:s(()=>[a(p,{value:n(u).sysTypeName,"onUpdate:value":t[0]||(t[0]=i=>n(u).sysTypeName=i),placeholder:"\u8F93\u5165\u5B57\u5178\u540D\u79F0"},null,8,["value"])]),_:1}),a(B,{label:"\u5B57\u5178\u7C7B\u578B",path:"sysType"},{default:s(()=>[a(p,{value:n(u).sysType,"onUpdate:value":t[1]||(t[1]=i=>n(u).sysType=i),placeholder:"\u8F93\u5165\u5B57\u5178\u7C7B\u578B"},null,8,["value"])]),_:1}),a(B,{label:"\u5B57\u5178\u7C7B\u578B\u503C",path:"sysTypeValue"},{default:s(()=>[a(p,{value:n(u).sysTypeValue,"onUpdate:value":t[2]||(t[2]=i=>n(u).sysTypeValue=i),placeholder:"\u8F93\u5165\u5B57\u5178\u7C7B\u578B\u503C"},null,8,["value"])]),_:1}),a(B,{label:"\u5907\u6CE8",path:"sysRemark"},{default:s(()=>[a(p,{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u5907\u6CE8",type:"textarea",value:n(u).sysRemark,"onUpdate:value":t[3]||(t[3]=i=>n(u).sysRemark=i)},null,8,["value"])]),_:1}),a(B,{label:"\u542F\u7528",path:"status"},{default:s(()=>[a(n(P),{value:n(u).status,"onUpdate:value":t[4]||(t[4]=i=>n(u).status=i)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])}}});export{We as default};
