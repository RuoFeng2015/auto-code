var J=Object.defineProperty,K=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var y=(d,o,r)=>o in d?J(d,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[o]=r,A=(d,o)=>{for(var r in o||(o={}))ee.call(o,r)&&y(d,r,o[r]);if(k)for(var r of k(o))ue.call(o,r)&&y(d,r,o[r]);return d},U=(d,o)=>K(d,Z(o));var v=(d,o,r)=>new Promise((_,m)=>{var b=e=>{try{f(r.next(e))}catch(F){m(F)}},E=e=>{try{f(r.throw(e))}catch(F){m(F)}},f=e=>e.done?_(e.value):Promise.resolve(e.value).then(b,E);f((r=r.apply(d,o)).next())});import{e as te,n as ae,t as h,a as ne}from"./platform_list.a62be74c.js";import{B as le,T as oe}from"./TableAction.f4a71aa5.js";import{u as se,B as re}from"./useForm.47f43cbf.js";import{R as w}from"./index.90881ba4.js";import{d as ie,a3 as de,a4 as ce,Q as pe,f as g,k as P,o as fe,c as Fe,V as t,X as s,a as me,u as a,ah as C,N as ge,bN as _e,bY as be,bh as D,h as N,aF as Ee,a2 as Be,aj as ve,aU as he,ai as Ce,av as De,b3 as Se,az as ke}from"./vendor.b23ac7e6.js";import"./useDesignSetting.37c45417.js";import"./index.esm.f571281f.js";const ye={class:"activity_manage flex justify-between"},Ae=D(" \u6DFB\u52A0\u6570\u636E "),Ue=D(" \u53D6\u6D88 "),we=D("\u63D0\u4EA4"),Ie=ie({setup(d){const o=de();ce(),pe();const r=g(null),_=g(),m=g(!1),b=()=>({tenantName:"",tenantCode:"",trade:"",contactUser:"",phone:"",dockingStaff:"",dockingStaffPhone:"",businessScope:"",advisoryTel:"",tenantDesc:""}),E=P({options:[{label:"\u5236\u9020\u4E1A",value:"0"},{label:"\u519C\u4E1A",value:"1"}]});let f=0,e=P(b());const F=g("\u65B0\u589E\u5E73\u53F0");let p=g(!1);const T={tenantName:{required:!0,message:"\u8BF7\u8F93\u5165\u5E73\u53F0\u540D\u79F0",trigger:"blur"},tenantCode:{required:!0,message:"\u5E73\u53F0\u7F16\u7801",trigger:"blur"},trade:{required:!0,message:"\u8BF7\u8F93\u5165\u884C\u4E1A",trigger:"blur"},contactUser:{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",trigger:"blur"},phone:{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",trigger:"blur"},dockingStaff:{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u90E8\u5BF9\u63A5\u4EBA",trigger:"blur"},dockingStaffPhone:{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u90E8\u5BF9\u63A5\u4EBA\u7535\u8BDD",trigger:"blur"},businessScope:{required:!0,message:"\u8BF7\u8F93\u5165\u7ECF\u8425\u8303\u56F4",trigger:"blur"},advisoryTel:{required:!0,message:"\u8BF7\u8F93\u5165\u54A8\u8BE2\u7535\u8BDD",trigger:"blur"},tenantDesc:{required:!0,message:"\u8BF7\u8F93\u5165\u5E73\u53F0\u63CF\u8FF0",trigger:"blur"}},x=[{field:"name",component:"NInput",label:"\u5E73\u53F0\u540D\u79F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0\u540D\u79F0",onInput:u=>{console.log(u)}}},{field:"phone",component:"NInput",label:"\u624B\u673A\u53F7",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",onInput:u=>{console.log(u)}}},{field:"makeDate",component:"NDatePicker",label:"\u6CE8\u518C\u65F6\u95F4",componentProps:{type:"date",clearable:!0,onUpdateValue:u=>{console.log(u)}}}],[R,{}]=se({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:100,schemas:x}),q=[{title:"\u5E73\u53F0\u540D\u79F0",key:"tenantName"},{title:"\u624B\u673A\u53F7",key:"phone"},{title:"\u8D26\u6237\u540D",key:"contactUser"},{title:"\u72B6\u6001",key:"useStatus",render(u){return N(Ee,{value:u.useStatus===0,onUpdateValue:n=>v(this,null,function*(){console.log("%c \u{1F36B} message: ","font-size:20px;background-color: #ED9EC7;color:#fff;",n);const{success:i}=yield te({id:u.id,useStatus:n?0:1});console.log(i),i?(o.success("\u64CD\u4F5C\u6210\u529F"),u.useStatus=u.useStatus===0?1:0):o.error("\u64CD\u4F5C\u5931\u8D25")})})}},{title:"\u6CE8\u518C\u65F6\u95F4",key:"createTime"},{title:"\u8054\u7CFB\u4EBA",key:"contactUser"},{title:"\u64CD\u4F5C",key:"create_date",render(u){return N(oe,{style:"button",actions:[{label:"\u7F16\u8F91",onClick:L.bind(null,u),ifShow:()=>!0,auth:["basic_list"]}]})}}];function B(){_.value.reload()}function V(u){u.preventDefault(),m.value=!0,r.value.validate(n=>{n?o.error("\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F"):f>0?j():z()})}function z(){ae(e).then(u=>{console.log("%c \u{1F37E} res: ","font-size:20px;background-color: #7F2B82;color:#fff;",u),u.code===w.SUCCESS?(p.value=!1,o.success("\u65B0\u5EFA\u6210\u529F"),B()):o.error(u.message),m.value=!1,console.log("%c \u{1F964} res: ","font-size:20px;background-color: #465975;color:#fff;",u)})}const I=()=>{F.value="\u65B0\u5EFA\u5E73\u53F0",p.value=!0,e.tenantName="",e.tenantCode="",e.trade="",e.contactUser="",e.phone="",e.dockingStaff="",e.dockingStaffPhone="",e.businessScope="",e.advisoryTel="",e.tenantDesc="",f=0};function j(){ne(U(A({},e),{id:f})).then(u=>{u.code===w.SUCCESS?(p.value=!1,o.success("\u4FEE\u6539\u6210\u529F"),B()):o.error(u.message),m.value=!1})}function L(u){F.value="\u4FEE\u6539\u5E73\u53F0",p.value=!0,f=u.id,e.tenantName=u.tenantName,e.tenantCode=u.tenantCode,e.trade=u.trade,e.contactUser=u.contactUser,e.phone=u.phone,e.dockingStaff=u.dockingStaff,e.dockingStaffPhone=u.dockingStaffPhone,e.businessScope=u.businessScope,e.advisoryTel=u.advisoryTel,e.tenantDesc=u.tenantDesc}function M(u){p.value=!1}function O(u){console.log(u),h(u),B()}const Q=u=>v(this,null,function*(){return console.log(h()),console.log("%c \u{1F32E} res: ","font-size:20px;background-color: #ED9EC7;color:#fff;",u),yield h(u)});return(u,n)=>{const i=Be,c=ve,W=he,X=Ce,Y=De,$=Se,G=ke;return fe(),Fe("div",ye,[t(G,null,{default:s(()=>[me("div",null,[t(a(re),{onRegister:a(R),onSubmit:O,onReset:u.handleReset},{statusSlot:s(({model:l,field:S})=>[t(i,{value:l[S],"onUpdate:value":H=>l[S]=H},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister","onReset"]),t(a(le),{columns:q,request:Q,"row-key":l=>l.id,ref_key:"actionRef",ref:_,"scroll-x":1090},{tableTitle:s(()=>[t(a(C),{type:"primary",onClick:I},{icon:s(()=>[t(a(ge),null,{default:s(()=>[t(a(_e))]),_:1})]),default:s(()=>[Ae]),_:1})]),_:1},8,["row-key"]),t($,{show:a(p),"onUpdate:show":n[10]||(n[10]=l=>be(p)?p.value=l:p=l),"show-icon":!1,title:F.value,preset:"card",style:{width:"800px"}},{footer:s(()=>[t(Y,{justify:"end"},{default:s(()=>[t(a(C),{class:"min-btn",type:"info",ghost:"","icon-placement":"left",onClick:M},{default:s(()=>[Ue]),_:1}),t(a(C),{type:"primary",class:"min-btn",loading:m.value,onClick:V},{default:s(()=>[we]),_:1},8,["loading"])]),_:1})]),default:s(()=>[t(X,{"label-width":80,model:a(e),rules:T,"label-placement":"left",ref_key:"formRef",ref:r},{default:s(()=>[t(c,{label:"\u5E73\u53F0\u540D\u79F0",path:"tenantName","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).tenantName,"onUpdate:value":n[0]||(n[0]=l=>a(e).tenantName=l),placeholder:"\u8F93\u5165\u5E73\u53F0\u540D\u79F0"},null,8,["value"])]),_:1}),t(c,{label:"\u5E73\u53F0\u7F16\u7801",path:"tenantCode","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).tenantCode,"onUpdate:value":n[1]||(n[1]=l=>a(e).tenantCode=l),placeholder:"\u5E73\u53F0\u7F16\u7801",disabled:F.value=="\u4FEE\u6539\u5E73\u53F0"},null,8,["value","disabled"])]),_:1}),t(c,{label:"\u884C\u4E1A",path:"trade","label-width":"auto"},{default:s(()=>[t(W,{placeholder:"\u8BF7\u9009\u62E9\u884C\u4E1A",options:a(E).options,value:a(e).trade,"onUpdate:value":n[2]||(n[2]=l=>a(e).trade=l)},null,8,["options","value"])]),_:1}),t(c,{label:"\u7ECF\u8425\u8303\u56F4",path:"businessScope","label-width":"auto"},{default:s(()=>[t(i,{placeholder:"\u8F93\u5165\u7ECF\u8425\u8303\u56F4",type:"textarea",value:a(e).businessScope,"onUpdate:value":n[3]||(n[3]=l=>a(e).businessScope=l)},null,8,["value"])]),_:1}),t(c,{label:"\u5E73\u53F0\u4FE1\u606F\u63CF\u8FF0",path:"tenantDesc","label-width":"auto"},{default:s(()=>[t(i,{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",type:"textarea",value:a(e).tenantDesc,"onUpdate:value":n[4]||(n[4]=l=>a(e).tenantDesc=l)},null,8,["value"])]),_:1}),t(c,{label:"\u8054\u7CFB\u4EBA",path:"contactUser","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).contactUser,"onUpdate:value":n[5]||(n[5]=l=>a(e).contactUser=l),placeholder:"\u8F93\u5165\u8054\u7CFB\u4EBA"},null,8,["value"])]),_:1}),t(c,{label:"\u8054\u7CFB\u7535\u8BDD",path:"phone","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).phone,"onUpdate:value":n[6]||(n[6]=l=>a(e).phone=l),placeholder:"\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["value"])]),_:1}),t(c,{label:"\u54A8\u8BE2\u7535\u8BDD",path:"advisoryTel","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).advisoryTel,"onUpdate:value":n[7]||(n[7]=l=>a(e).advisoryTel=l),placeholder:"\u8F93\u5165\u54A8\u8BE2\u7535\u8BDD"},null,8,["value"])]),_:1}),t(c,{label:"\u5185\u90E8\u5BF9\u63A5\u4EBA",path:"dockingStaff","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).dockingStaff,"onUpdate:value":n[8]||(n[8]=l=>a(e).dockingStaff=l),placeholder:"\u8F93\u5165\u5185\u90E8\u5BF9\u63A5\u4EBA"},null,8,["value"])]),_:1}),t(c,{label:"\u5185\u90E8\u5BF9\u63A5\u4EBA\u7535\u8BDD",path:"dockingStaffPhone","label-width":"auto"},{default:s(()=>[t(i,{value:a(e).dockingStaffPhone,"onUpdate:value":n[9]||(n[9]=l=>a(e).dockingStaffPhone=l),placeholder:"\u8F93\u5165\u5185\u90E8\u5BF9\u63A5\u4EBA\u7535\u8BDD"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])]),_:1})])}}});export{Ie as default};
