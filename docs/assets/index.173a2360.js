var te=Object.defineProperty,ae=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var w=(r,o,s)=>o in r?te(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s,F=(r,o)=>{for(var s in o||(o={}))le.call(o,s)&&w(r,s,o[s]);if(R)for(var s of R(o))ne.call(o,s)&&w(r,s,o[s]);return r},A=(r,o)=>ae(r,se(o));var E=(r,o,s)=>new Promise((h,m)=>{var p=d=>{try{y(s.next(d))}catch(f){m(f)}},v=d=>{try{y(s.throw(d))}catch(f){m(f)}},y=d=>d.done?h(d.value):Promise.resolve(d.value).then(p,v);y((s=s.apply(r,o)).next())});import{B as oe,T as K}from"./TableAction.d65c08e5.js";import{u as ie,B as re}from"./useForm.a78b5dee.js";import{d as de,Q as ce,a3 as pe,a4 as fe,f as _,k as x,o as U,c as _e,V as a,X as l,u as n,_ as ye,bN as me,Z as ve,aF as N,bh as V,h as S,a2 as De,N as Be,ah as Fe,az as he,aj as ge,ai as be,av as Ce,b3 as ke}from"./vendor.b23ac7e6.js";import{d as Ee,e as Ve,f as Te,g as Re}from"./dictionaries.9b3f053b.js";import{d as we,R as Ae}from"./index.47bca9f6.js";import"./useDesignSetting.222c9fbf.js";import"./index.esm.f571281f.js";const Ke=V(" \u65B0\u5EFA\u5B57\u5178 "),xe=V(" \u53D6\u6D88 "),Ue=V("\u63D0\u4EA4"),Oe=de({setup(r){const{hasPermission:o}=we();ce();const s=pe(),h=fe(),m=_(),p=_(!1),v=_(!1),y=_(),d=_("\u65B0\u5EFA\u5B57\u5178"),f=_(!0),P=_(0),q=[{field:"sysDataKey",component:"NInput",label:"\u5B57\u5178\u540D\u79F0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u540D\u79F0",onInput:e=>{console.log(e),g.sysDataKey=e}}}],[I,{}]=ie({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:q});let g=x((()=>({sysDataKey:""}))());const j=[{title:"\u5B57\u5178\u7F16\u7801",key:"id"},{title:"\u5B57\u5178\u6807\u7B7E",key:"sysDataKey"},{title:"\u5B57\u5178\u952E\u503C",key:"sysDataValue"},{title:"\u6392\u5E8F",key:"sort"},{title:"\u72B6\u6001",key:"status",render(e){return S(N,{value:e.status,onUpdateValue:t=>{Q(e,t)}})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime"},{title:"\u64CD\u4F5C",key:"create_date",render(e){return S(K,{style:"button",actions:[{label:"\u7F16\u8F91",onClick:W.bind(null,e),ifShow:()=>!0,auth:["edit"]},{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:X.bind(null,e),ifShow:()=>!0,auth:["delete"]}]})}}],L={sysDataKey:{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u6807\u7B7E",trigger:"blur"},sysType:{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B",trigger:"blur"},sysDataValue:{required:!0,message:"\u8BF7\u8F93\u5165\u952E\u503C",trigger:"blur"}};let u=x((()=>({id:"",sysDataKey:"",sysType:""+P.value,sysDataValue:"",sort:"",status:!0}))());const M=e=>E(this,null,function*(){let t=yield Ee(F(F({},g),e));return t.data.forEach(c=>{c.status=c.status===1}),t});function b(){m.value.reload()}function $(e){b()}function z(e){g.sysDataKey="",b()}function O(){d.value="\u65B0\u5EFA\u5B57\u5178",p.value=!0,f.value=!0}function Q(e,t){console.log("\u542F\u7528\uFF1A"+t)}function W(e){d.value="\u7F16\u8F91\u5B57\u5178",p.value=!0,u.id=e.id,u.sysDataKey=e.sysDataKey,u.sysDataValue=e.sysDataValue,u.sort=e.sort,u.status=e.status,f.value=!1}function X(e){h.info({title:"\u63D0\u793A",content:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6240\u9009\u5B57\u5178\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{Ve({id:e.id}).then(t=>{C(t)})},onNegativeClick:()=>{}})}function Z(){p.value=!1}function G(e){e.preventDefault(),v.value=!0,y.value.validate(t=>E(this,null,function*(){if(!t){let c=A(F({},u),{status:u.status?1:0});f.value?yield Te(c).then(D=>{C(D)}):yield Re(c).then(D=>{C(D)}),p.value=!1}v.value=!1}))}function C(e){u.id="",u.sysDataKey="",u.sysDataValue="",u.sort="",u.status=!0,e.code===Ae.SUCCESS?(s.success("\u64CD\u4F5C\u6210\u529F"),b()):s.error("\u64CD\u4F5C\u5931\u8D25\uFF1A"+e.message)}return(e,t)=>{const c=De,D=Be,k=Fe,H=he,B=ge,J=be,Y=Ce,ee=ke;return U(),_e("div",null,[a(H,{bordered:!1,class:"mt-4 proCard"},{default:l(()=>[a(n(re),{onRegister:n(I),onSubmit:$,onReset:z},{statusSlot:l(({model:i,field:T})=>[a(c,{value:i[T],"onUpdate:value":ue=>i[T]=ue},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),a(n(oe),{columns:j,request:M,"row-key":i=>i.id,ref_key:"actionRef",ref:m},{tableTitle:l(()=>[n(o)(["add"])?(U(),ye(k,{key:0,type:"primary",onClick:O,hasPermission:""},{icon:l(()=>[a(D,null,{default:l(()=>[a(n(me))]),_:1})]),default:l(()=>[Ke]),_:1})):ve("",!0)]),action:l(()=>[a(n(K))]),_:1},8,["row-key"])]),_:1}),a(ee,{show:p.value,"onUpdate:show":t[5]||(t[5]=i=>p.value=i),"show-icon":!1,title:d.value,preset:"card",style:{"{\n          margin":"10px 60px",width:"600px"}},{footer:l(()=>[a(Y,{justify:"end"},{default:l(()=>[a(k,{class:"min-btn",type:"info",ghost:"","icon-placement":"left",onClick:Z},{default:l(()=>[xe]),_:1}),a(k,{type:"primary",class:"min-btn",loading:v.value,onClick:G},{default:l(()=>[Ue]),_:1},8,["loading"])]),_:1})]),default:l(()=>[a(J,{"label-width":80,model:n(u),rules:L,"label-placement":"left",ref_key:"formRef",ref:y},{default:l(()=>[a(B,{label:"\u5B57\u5178\u7C7B\u578B",path:"sysType"},{default:l(()=>[a(c,{value:n(u).sysType,"onUpdate:value":t[0]||(t[0]=i=>n(u).sysType=i),placeholder:"\u8F93\u5165\u5B57\u5178\u7C7B\u578B",disabled:""},null,8,["value"])]),_:1}),a(B,{label:"\u5B57\u5178\u6807\u7B7E",path:"sysDataKey"},{default:l(()=>[a(c,{value:n(u).sysDataKey,"onUpdate:value":t[1]||(t[1]=i=>n(u).sysDataKey=i),placeholder:"\u8F93\u5165\u6807\u7B7E"},null,8,["value"])]),_:1}),a(B,{label:"\u5B57\u5178\u952E\u503C",path:"sysDataValue"},{default:l(()=>[a(c,{value:n(u).sysDataValue,"onUpdate:value":t[2]||(t[2]=i=>n(u).sysDataValue=i),placeholder:"\u8F93\u5165\u5B57\u952E\u503C"},null,8,["value"])]),_:1}),a(B,{label:"\u6392\u5E8F",path:"sort"},{default:l(()=>[a(c,{value:n(u).sort,"onUpdate:value":t[3]||(t[3]=i=>n(u).sort=i),placeholder:"\u8F93\u5165\u6392\u5E8F"},null,8,["value"])]),_:1}),a(B,{label:"\u542F\u7528",path:"status"},{default:l(()=>[a(n(N),{value:n(u).status,"onUpdate:value":t[4]||(t[4]=i=>n(u).status=i)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])])}}});export{Oe as default};
